#!/usr/bin/env bash

function create_folder(){
  local target=$1
  local user=${2:-$(id -u)}
  local group=${3:-$(id -g)}
  sudo mkdir -p $target
  sudo chown -R $user:$group $target
#  sudo chmod 777 $target
}

function create_app_symlink(){
  local type=$1
  shift
  local target=/mnt/$type/app
  create_folder $target
  local link=volumes/$type
  sudo ln -sf $target $link

  [[ $# -eq 0 ]] && return
  local name=$1
  shift
  local dest=link/$name
  create_folder $dest "$@"
}

function create_volumes(){
  local volumes=~/app/volumes
  create_folder $volumes
  create_app_symlink data
  create_app_symlink mass
}